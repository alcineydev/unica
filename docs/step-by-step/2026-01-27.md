# Step-by-step - 2026-01-27

## Contexto
- Projeto UNICA (Next.js 15, React 19, TypeScript, Tailwind, shadcn/ui).
- Objetivo: corrigir UX da sidebar admin e limpar headers; refatorar sidebar admin para flyout em desktop e inline fechado em mobile.

## Alterações desta sessão
1. `src/components/admin/sidebar.tsx`
   - Garantida a preservação da posição de scroll usando refs e `requestAnimationFrame` ao expandir submenus ou navegar (sessão anterior).
   - Refatorada para popover/flyout em desktop (apenas um aberto), menus móveis começam fechados, remoção de expansão automática por rota e ajuste de largura desktop para `w-64`.
   - Popover passa a usar posicionamento `fixed` com cálculo dinâmico via `getBoundingClientRect`, evitando corte por overflow do nav; limpa posição ao clicar fora ou trocar rota.

2. `src/components/admin/header.tsx`
   - Removido search não funcional e toggle de tema; ajustado espaçamento para o hamburger no mobile; removido spacer vazio e alinhado header com `justify-end`.

3. `src/components/parceiro/header.tsx`
   - Removido search não funcional; mantido CTA “Registrar Venda” e ícones existentes.

## Função dos arquivos tocados
- `src/components/admin/sidebar.tsx`: navegação principal do painel admin, controla expansão de submenus e mantém scroll entre rotas.
- `src/components/admin/header.tsx`: header do painel admin com notificações e menu de usuário.
- `src/components/parceiro/header.tsx`: header do painel parceiro com CTA de vendas, notificações e menu de usuário.

## Próximos passos sugeridos
- Validar visual no mobile para confirmar espaçamento do hamburger.
- Testar navegação entre submenus confirmando a restauração suave do scroll.
- Homologar UX do popover em desktop (abrir/fechar, clique fora, destaque de ativo).
